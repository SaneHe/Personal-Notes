## `I/O` 操作

> 在现代操作系统中, 分为内核空间和用户空间, 应用程序一般都运行在用户空间(仅能操作用户空间的数据)

### 两个阶段

>获取到数据后即开始数据类操作, 不再是 `I/O`

- 数据准备阶段
- 将数据从内核空间拷贝到用户进程(用户空间)

### 同步与异步、阻塞与非阻塞  `I/O`

```
阻塞与非阻塞 `I/O` 区别在于第一步发起 `I/O` 请求时是否阻塞, 若阻塞到完成即为阻塞 `I/O`; 否则为非阻塞`I/O`

同步与异步 `I/O`区别在于第二部复制数据是否阻塞, 若不阻塞, 操作系统做完 `I/O` 再将结果返回, 即为异步 `I/O`; 否则为同步 `I/O`
```

### 同步与异步、阻塞与非阻塞 (线程/通信)

```
同步与异步是对应于调用者与被调用者，它们是线程之间的关系，两个线程之间要么是同步的，要么是异步的

	同步操作时,调用者需要等待被调用者返回结果，才会进行下一步操作

	而异步则相反, 调用者不需要等待被调用者返回调用, 即可进行下一步操作, 被调用者通常依靠事件、回调等机制来通知调用者结果


阻塞与非阻塞是对同一个线程来说的, 在某个时刻, 线程要么处于阻塞, 要么处于非阻塞

阻塞和非阻塞关注的是程序在等待调用结果（消息，返回值）时的状态:

    阻塞调用是指调用结果返回之前, 当前线程会被挂起. 调用线程只有在得到结果之后才会返回

    非阻塞调用指在不能立刻得到结果之前, 该调用不会阻塞当前线程
```

同步阻塞方式：
    发送方发送请求之后一直等待响应。
    接收方处理请求时进行的IO操作如果不能马上等到返回结果，就一直等到返回结果后，才响应发送方，期间不能进行其他工作。

同步非阻塞方式：
	发送方发送请求之后，一直等待响应。
	接受方处理请求时进行的IO操作如果不能马上的得到结果，就立即返回，取做其他事情。
	但是由于没有得到请求处理结果，不响应发送方，发送方一直等待。
	当IO操作完成以后，将完成状态和结果通知接收方，接收方再响应发送方，发送方才进入下一次请求过程。（实际不应用）

异步阻塞方式：
	发送方向接收方请求后，不等待响应，可以继续其他工作。
	接收方处理请求时进行IO操作如果不能马上得到结果，就一直等到返回结果后，才响应发送方，期间不能进行其他操作。 （实际不应用）

异步非阻塞方式：
	发送方向接收方请求后，不等待响应，可以继续其他工作。
	接收方处理请求时进行IO操作如果不能马上得到结果，也不等待，而是马上返回去做其他事情。
	当IO操作完成以后，将完成状态和结果通知接收方，接收方再响应发送方。（效率最高）

## 参考

- [阻塞 非阻塞 同步 异步](https://www.cnblogs.com/loveer/p/11479249.html)
- [多路复用](https://www.nosuchfield.com/2019/01/09/Multiplex-and-non-blocking-and-threading-and-coroutine/)
- [Linux-01-网络IO](http://zhuuu.work/2020/08/18/Linux/Linux-01-%E7%BD%91%E7%BB%9CIO/)
